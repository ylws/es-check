"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(e[l]=c[l])}return e},_createClass=function(){function e(e,t){for(var c=0;c<t.length;c++){var l=t[c];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,c,l){return c&&e(t.prototype,c),l&&e(t,l),t}}(),CFCMCheckbox=function(){function e(t,c){_classCallCheck(this,e),this.initVal(t,c)}return _createClass(e,[{key:"getId",value:function(e){return document.getElementById(e)}},{key:"getClassAll",value:function(e){return document.querySelectorAll(e)}},{key:"remove",value:function(e){var t=e.parentNode;t&&t.removeChild(e)}},{key:"initVal",value:function(e,t){var c={father:".checkfather span",selected:"checked",select:"check",checktop:"checktop",getindex:!1,init:{index:[],val:!0},multline:{flag:!1,classname:"",index:[]},inputflag:!1,disabled:!1,checkall:"",str:{},checkallflag:""};this.cfg={};_extends(this.cfg,c,e);this.cfg.arg=_typeof(arguments[0]),this.cfg.len=arguments.length,this.cfg.fn=t,this.cfg.multline.flag&&this.cfg.multline.index&&(this.cfg.init.index=this.cfg.multline.index),this.initCommonVal()}},{key:"initCommonVal",value:function(){var e=this,t=this.getClassAll(this.cfg.father);Array.prototype.slice.call(t).forEach(function(t,c){t.setAttribute("class",e.cfg.select),e.cfg.inputflag&&(t.querySelector("input[type=checkbox]").style.display="none",t.querySelector("input[type=checkbox]").removeAttribute("checked")),e.cfg.init.index.forEach(function(l){if(l==c){e.cfg.inputflag?(t.querySelector("input[type=checkbox]").setAttribute("checked",e.cfg.init.val),t.setAttribute("class",e.cfg.selected)):t.setAttribute("class",e.cfg.selected);var i=t.parentNode.getAttribute("id");null!=i&&(e.cfg.str[i.toString()]=i)}})}),this.cfg.checkall&&(this.cfg.checkallflag?this.getId(this.cfg.checkall).setAttribute("class",this.cfg.selected):this.getId(this.cfg.checkall).setAttribute("class",this.cfg.select)),this.clickEvent(),this.checkall()}},{key:"parents",value:function(e,t){return e.className==t?e:this.parents(e.parentNode,t)}},{key:"checkall",value:function(){var e=this;this.cfg.checkall&&(this.getId(this.cfg.checkall).onclick=function(){var t=this.getAttribute("class"),c=e.getClassAll(e.cfg.father);t==e.cfg.select?(e.cfg.checkallflag=!0,this.setAttribute("class","checked"),Array.prototype.slice.call(c).forEach(function(t,c){e.cfg.inputflag?(t.setAttribute("class",e.cfg.selected),t.querySelector("input[type=checkbox]").setAttribute("checked",e.cfg.init.val)):t.setAttribute("class",e.cfg.selected);var l=t.parentNode.getAttribute("id");null!=l&&(e.cfg.getindex?e.cfg.str[t.value]=l:e.cfg.str[l]=l)})):(e.cfg.checkallflag=!1,this.setAttribute("class","check"),Array.prototype.slice.call(c).forEach(function(t,c){e.cfg.inputflag?(t.setAttribute("class",e.cfg.select),t.querySelector("input[type=checkbox]").removeAttribute("checked")):t.setAttribute("class",e.cfg.select)}),e.cfg.str={}),"function"==typeof e.cfg.fn&&(console.log("checkall fn exe",e.cfg.checkallflag),e.cfg.fn(e.cfg.str,"",e.cfg.str))})}},{key:"clickEvent",value:function(){var e=this,t=this.cfg;if(!this.cfg.disabled){var c=this.getClassAll(this.cfg.father);Array.prototype.slice.call(c).forEach(function(c,l){c.onclick=function(){var l=c.getAttribute("class"),i=this.parentNode.getAttribute("id");if(l==e.cfg.select?(null!=i&&(e.cfg.str[i]=i),c.setAttribute("class",e.cfg.selected),e.cfg.inputflag&&c.querySelector("input[type=checkbox]").setAttribute("checked",e.cfg.init.val),e.cfg.multline?e.getClassAll(e.cfg.father).length==e.parents(c,t.checktop).querySelectorAll("."+e.cfg.selected).length&&e.cfg.checkall&&e.getId(e.cfg.checkall).click():e.getClassAll(e.cfg.father).length==c.parentNode.querySelectorAll("."+e.cfg.selected).length&&e.cfg.checkall&&e.getId(e.cfg.checkall).click()):(null!=i&&delete e.cfg.str[i],c.setAttribute("class",e.cfg.select),e.cfg.inputflag&&c.querySelector("input[type=checkbox]").removeAttribute("checked"),e.cfg.checkall&&(e.getId(e.cfg.checkall).setAttribute("class",e.cfg.select),e.cfg.checkallflag=!1)),1==e.cfg.len&&"function"==typeof e.cfg.arg)e.cfg.fn(e.cfg.str);else if("function"==typeof e.cfg.fn){var s="",n="",f=c.textContent;e.cfg.fatheridclass?e.parents(c,e.cfg.mutline.classname.substring(1)).getAttribute("id")&&(console.log(e.parents(c,e.cfg.multline.classname.substring(1))),s=e.parents(c,e.cfg.multline.classname.substring(1)).getAttribute("id")):c.parentNode.getAttribute("id")&&(s=c.parentNode.getAttribute("id")),e.cfg.inputflag&&c.querySelector("input[type=checkbox]").defaultValue&&(n=c.querySelector("input[type=checkbox]").defaultValue),s&&n?e.cfg.fn(s,n,e.cfg.str,f):s&&!n?e.cfg.fn(s,e.cfg.str,f):n&&!s?e.cfg.fn(n,e.cfg.str,f):e.cfg.fn(e.cfg.str)}}})}}}]),e}();
export function CFCMCheckbox(param, fn) {
		return new CFCMCheckbox(param, fn)
	}